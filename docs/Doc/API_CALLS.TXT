ATLAS â€” API CALLS (v1)

Base path: /api/v1
Auth header: Authorization: Bearer <jwt>

AUTH
1) POST /auth/register
   - Create user, return JWT

2) POST /auth/login
   - Validate credentials, return JWT

3) GET /auth/me
   - Return current user

COLLECTIONS
4) POST /collections
   - Create collection (creator becomes owner)

5) GET /collections
   - List collections current user is a member of

6) GET /collections/{collection_id}
   - Get collection details (RBAC enforced)

7) PATCH /collections/{collection_id}
   - Update collection name (owner only)

8) DELETE /collections/{collection_id}
   - Delete collection (owner only)

MEMBERSHIPS / RBAC
9) POST /collections/{collection_id}/members
   - Add member by email + role (owner only)

10) PATCH /collections/{collection_id}/members/{user_id}
   - Change member role (owner only)

11) DELETE /collections/{collection_id}/members/{user_id}
   - Remove member (owner only)

ITEMS
12) POST /collections/{collection_id}/items
   - Create item in collection (owner/editor)
   - Optional header: Idempotency-Key

13) GET /collections/{collection_id}/items
   - List items in collection (all members)
   - Pagination params: limit + cursor

14) GET /items/{item_id}
   - Get item details (RBAC via collection membership)

15) PATCH /items/{item_id}
   - Update item (owner/editor)
   - Optional header: Idempotency-Key

16) DELETE /items/{item_id}
   - Delete item (owner/editor)

TAGS
17) GET /collections/{collection_id}/tags
   - List tags for a collection (all members)

(Optional)
18) POST /collections/{collection_id}/tags
   - Create tag explicitly (owner/editor)

SEARCH (Post-MVP, Elasticsearch)
19) GET /search/items
   - Query params:
     - q (text)
     - collection_id (optional; if omitted search across accessible collections)
     - tags (comma-separated)
     - from/to (date range)
     - sort/order
   - RBAC enforced (only collections user can access)

JOBS (Post-MVP)
20) POST /jobs
   - Create a job (e.g., ENRICH_URL for item_id)
   - Body: type + payload

21) GET /jobs/{job_id}
   - Get job status

22) GET /jobs
   - Filter by status, created_by, etc.

AUDIT (Post-MVP)
23) GET /audit
   - Query options:
     - entity_type + entity_id
     - actor_user_id
     - collection_id
     - from/to timestamps
